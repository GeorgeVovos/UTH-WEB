<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Alumni Data Viewer</title>
    <style>
        button {
            width: 150px;
            /*margin-bottom: 10px;*/
        }

        h2 {
            margin-top: 0;
        }

        #leftDiv {
            width: 160px;
            float: left;
        }

        #rightDiv {
            padding-left: 170px;
        }
    </style>
    <script>
        function loadXMLData() {
            const xhr = new XMLHttpRequest();
            xhr.open("GET", "https://uthalumniapi.azurewebsites.net/api/AlumniRawFile/xml", true);
            xhr.onload = function () {
                if (xhr.status === 200) {
                    const parser = new DOMParser();
                    const xmlDoc = parser.parseFromString(xhr.responseText, "application/xml");
                    var responseHtml = "<h2>Data (XML)</h2>";;

                    const alumniRecords = xmlDoc.getElementsByTagName("Alumni");
                    for (let i = 0; i < alumniRecords.length; i++) {
                        const alumni = alumniRecords[i];
                        const id = alumni.getAttribute("id");
                        const firstName = alumni.getElementsByTagName("FirstName")[0].textContent;
                        const lastName = alumni.getElementsByTagName("LastName")[0]?.textContent || "";
                        responseHtml += `<p>ID: ${id}, Name: ${firstName} ${lastName}</p>`;
                    }

                    displayData(responseHtml);
                }
            };
            xhr.send();
        }

        function loadJSONData() {
            const xhr = new XMLHttpRequest();
            xhr.open("GET", "https://uthalumniapi.azurewebsites.net/api/AlumniRawFile/json", true);
            xhr.onload = function () {
                if (xhr.status === 200) {
                    const jsonData = JSON.parse(xhr.responseText);
                    var responseHtml = "<h2>Data (JSON)</h2>";;

                    const alumniRecords = jsonData.ResponseData.AlumniRecords.Alumni;
                    alumniRecords.forEach(alumni => {
                        const id = alumni.id;
                        const firstName = alumni.PersonalInfo.FirstName;
                        const lastName = alumni.PersonalInfo.LastName || "";
                        responseHtml += `<p>ID: ${id}, Name: ${firstName} ${lastName}</p>`;
                    });

                    displayData(responseHtml);
                }
            };
            xhr.send();
        }

        function displayData(responseHtml) {
            clearData();
            const rightDiv = document.getElementById("rightDiv");
            rightDiv.innerHTML = responseHtml;

        }

        function clearData() {
            document.getElementById("rightDiv").innerHTML = "";
        }

        document.addEventListener("DOMContentLoaded", function () {
            document.getElementById("loadXMLButton").onclick = loadXMLData;
            document.getElementById("loadJSONButton").onclick = loadJSONData;
            document.getElementById("clearButton").onclick = clearData;
        });
    </script>
</head>
<body>
    <h1>UTH Alumni Data </h1>
    Data is loaded from <br />
    <a target="_blank" href="https://uthalumniapi.azurewebsites.net/api/AlumniRawFile/json">https://uthalumniapi.azurewebsites.net/api/AlumniRawFile/json</a>
    <br />
    and
    <br />
    <a target="_blank" href="https://uthalumniapi.azurewebsites.net/api/AlumniRawFile/xml">https://uthalumniapi.azurewebsites.net/api/AlumniRawFile/xml</a>
    <hr />
    <div id="leftDiv">
        <button id="loadXMLButton">Load XML Data</button>
        <button id="loadJSONButton">Load JSON Data</button>
        <button id="clearButton">Clear Data</button>
    </div>
    <div id="rightDiv">
        <!-- Data will be displayed here -->
    </div>
</body>
</html>
